---
csl: apa.csl
bibliography: PLFCitations.bib
---

###### Revision date: 24th, Mar 2017

Prototype Lab Flow Project
==========================

Projects website: <https://mndk0076.github.io/>

Declaration of Joint Authorship
-------------------------------
The work defined in this report is a joint collaboration project by Sukhdeep Sehra, Gurpreet Jhita, Matheus Almeida, and Kenneth Mendoza. The work specified is solely of our own creation and is expressed in our own words. We have clearly referenced all work with proper APA citatations with respect to the authors of the information. All work in this project is equally divided. Kenneth Mendoza was in charge of the development of the database, Sukhdeep Sehra was in charge of the design and construction of the hardware, Matheus Almeida worked on the overall layout and skeleton code of the mobile application and Gurpreet Jhita was in charge of designing and coding the admin website. Everyone has collaborated in all aspects of the deveplopent.

Approved Proposal
-----------------
*Proposal for the Prototype Lab Flow Project*

Prepared by Kenneth Mendoza, Sukhdeep Sehra, Matheus Rondinelli and Gurpreet Jhita 
*Computer Engineering Technology Students*  
<https://mndk0076.github.io/>


Executive Summary
-----------------
As students in the Computer Engineering Technology program, we will be integrating the knowledge and skills we have learned from our program into this Internet of Things themed capstone project. This proposal requests the approval to build the hardware portion that will connect to a database as well as to a mobile device application. The Internet connected hardware will include a custom PCB with sensors and actuators for LCD monitor and a scanner. The database will store all of the items from the parts crib for availability of the parts, and all of the users and admins info from the mobile app. The mobile device functionality will include a mobile app for users to request items, a LCD monitor that display the users requested items, a scanner to scan the user mobile app when returning the items, a mobile app for the users to send request items and will be further detailed in the mobile application proposal. We will be collaborating with Humber College Technology Department. In the winter semester we plan to form a group with the following students; Kenneth Mendoza, Sukhdeep Sehra, Matheus Rondinelli and Gurpreet Jhita, who are also building similar hardware this term and working on the mobile application. The hardware will be completed in CENG 317 Hardware Production Techniques independently and the application will be completed in CENG 319 Software Project. These will be integrated together in the subsequent term in CENG 355 Computer Systems Project.

Background
----------
Currently, we students have no way of booking time slots or requesting items from the prototype lab through a convenient application. Students have to go personally to the prototype lab and book the time or hope the item required is available. As a team, we feel like this is an inconvenient experience for the students and feel like an automated system would help to improve the current system by making it more efficient and more appealing to the student. Students would be able to book times slots and request items through the application and they would also be able to cancel requested time slots or items, freeing the space or item for another student and without having to go through the lab personally. That would also improve the time management of the staff, since they will not have to manage the times by themselves while having to work and help other students present in the prototype lab.

We have searched for prior art via Humber’s IEEE subscription selecting “My Subscribed Content” and have found and read which provides insight into similar efforts.

The first article discusses how Gabor used QR decomposition for image encoding.

The second article discusses how support system for QR codes based educational processes.

The third article discusses how VLSI implementation of hybrid QR code generation system.

In the Computer Engineering Technology program we have learned about the following topics from the respective relevant courses:

-   Java Docs from CENG 212 Programming Techniques In Java,

-   Construction of circuits from CENG 215 Digital And Interfacing Systems,

-   Rapid application development and Gantt charts from CENG 216 Intro to
    Software Engineering,

-   Micro computing from CENG 252 Embedded Systems,

-   SQL from CENG 254 Database With Java,

-   Web access of databases from CENG 256 Internet Scripting; and,

-   Wireless protocols such as 802.11 from TECH152 Telecom Networks.

This knowledge and skill set will enable me to build the subsystems and integrate them together as my capstone project.

Methodology
-----------

This proposal is assigned in the first week of class and is due at the beginning of class in the second week of the fall semester. My coursework will focus on the first two of the 3 phases of this project:  
Phase 1 Hardware build.  
Phase 2 System integration.  
Phase 3 Demonstration to future employers.

*Phase 1 Hardware build*
The hardware build will be completed in the fall term. It will fit within the CENG Project maximum dimensions of 12 13/16" x 6" x 2 7/8" (32.5cm x 15.25cm x 7.25cm) which represents the space below the tray in the parts kit. The highest AC voltage that will be used is 16Vrms from a wall adaptor from which +/- 15V or as high as 45 VDC can be obtained. Maximum power consumption will be 20 Watts.

*Phase 2 System integration*
The system integration will be completed in the fall term.

*Phase 3 Demonstration to future employers*
This project will showcase the knowledge and skills that I have learned to potential employers.

The tables below provide rough effort and non-labour estimates respectively for each phase. A Gantt chart will be added by week 3 to provide more project schedule details and a more complete budget will be added by week 4. It is important to start tasks as soon as possible to be able to meet deadlines.

| **Labour Estimates**                                                                                                                                                                                                                                                                                                                  | **Hrs**        | **Notes**                                                                                                                      |
|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|----------------|--------------------------------------------------------------------------------------------------------------------------------|
| **Phase 1**                                                                                                                                                                                                                                                                                                                           |                |                                                                                                                                |
| Writing proposal.                                                                                                                                                                                                                                                                                                                     | 9              | Tech identification quiz.                                                                                                      |
| Creating project schedule. Initial project team meeting.                                                                                                                                                                                                                                                                              | 9              | Proposal due.                                                                                                                  |
| Creating budget. Status Meeting.                                                                                                                                                                                                                                                                                                      | 9              | Project Schedule due.                                                                                                          |
| Acquiring components and writing progress report.                                                                                                                                                                                                                                                                                     | 9              | Budget due.                                                                                                                    |
| Mechanical assembly and writing progress report. Status Meeting.                                                                                                                                                                                                                                                                      | 9              | Progress Report due (components acquired milestone).                                                                           |
| PCB fabrication.                                                                                                                                                                                                                                                                                                                      | 9              | Progress Report due (Mechanical Assembly milestone).                                                                           |
| Interface wiring, Placard design, Status Meeting.                                                                                                                                                                                                                                                                                     | 9              | PCB Due (power up milestone).                                                                                                  |
| Preparing for demonstration.                                                                                                                                                                                                                                                                                                          | 9              | Placard due.                                                                                                                   |
| Writing progress report and demonstrating project.                                                                                                                                                                                                                                                                                    | 9              | Progress Report due (Demonstrations at Open House Saturday, November 7, 2015 from 10 a.m. - 2 p.m.).                           |
| Editing build video.                                                                                                                                                                                                                                                                                                                  | 9              | Peer grading of demonstrations due.                                                                                            |
| Incorporation of feedback from demonstration and writing progress report. Status Meeting.                                                                                                                                                                                                                                             | 9              | 30 second build video due.                                                                                                     |
| Practice presentations                                                                                                                                                                                                                                                                                                                | 9              | Progress Report due.                                                                                                           |
| 1st round of Presentations, Collaborators present.                                                                                                                                                                                                                                                                                    | 9              | Presentation PowerPoint file due.                                                                                              |
| 2nd round of Presentations                                                                                                                                                                                                                                                                                                            | 9              | Build instructions up due.                                                                                                     |
| Project videos, Status Meeting.                                                                                                                                                                                                                                                                                                       | 9              | 30 second script due.                                                                                                          |
| **Phase 1 Total**                                                                                                                                                                                                                                                                                                                     | **135**        |                                                                                                                                |
| **Phase 2**                                                                                                                                                                                                                                                                                                                           |                |                                                                                                                                |
| Meet with collaborators                                                                                                                                                                                                                                                                                                               | 9              | Status Meeting                                                                                                                 |
| Initial integration.                                                                                                                                                                                                                                                                                                                  | 9              | Progress Report                                                                                                                |
| Meet with collaborators                                                                                                                                                                                                                                                                                                               | 9              | Status Meeting                                                                                                                 |
| Testing.                                                                                                                                                                                                                                                                                                                              | 9              | Progress Report                                                                                                                |
| Meet with collaborators                                                                                                                                                                                                                                                                                                               | 9              | Status Meeting                                                                                                                 |
| Meet with collaborators                                                                                                                                                                                                                                                                                                               | 9              | Status Meeting                                                                                                                 |
| Incorporation of feedback.                                                                                                                                                                                                                                                                                                            | 9              | Progress Report                                                                                                                |
| Meet with collaborators                                                                                                                                                                                                                                                                                                               | 9              | Status Meeting                                                                                                                 |
| Testing.                                                                                                                                                                                                                                                                                                                              | 9              | Progress Report                                                                                                                |
| Meet with collaborators                                                                                                                                                                                                                                                                                                               | 9              | Status Meeting                                                                                                                 |
| Prepare for demonstration.                                                                                                                                                                                                                                                                                                            | 9              | Progress Report                                                                                                                |
| Complete presentation.                                                                                                                                                                                                                                                                                                                | 9              | Demonstration at Open House Saturday, April 9, 2016 10 a.m. to 2 p.m.                                                          |
| Complete final report. 1st round of Presentations.                                                                                                                                                                                                                                                                                    | 9              | Presentation PowerPoint file due.                                                                                              |
| Write video script. 2nd round of Presentations, delivery of project.                                                                                                                                                                                                                                                                  | 9              | Final written report including final budget and record of expenditures, covering both this semester and the previous semester. |
| Project videos.                                                                                                                                                                                                                                                                                                                       | 9              | Video script due                                                                                                               |
| **Phase 2 Total**                                                                                                                                                                                                                                                                                                                     | **135**        |                                                                                                                                |
| **Phase 3**                                                                                                                                                                                                                                                                                                                           |                |                                                                                                                                |
| Interviews                                                                                                                                                                                                                                                                                                                            | TBD            |                                                                                                                                |
| **Phase 3 Total**                                                                                                                                                                                                                                                                                                                     | **TBD**        |                                                                                                                                |
| **Material Estimates**                                                                                                                                                                                                                                                                                                                | **Cost**       | **Notes**                                                                                                                      |
| **Phase 1**                                                                                                                                                                                                                                                                                                                           |                |                                                                                                                                |
| A microcomputer composed of a quad-core Windows 10 IoT core compatible Broadcom BCM2836 SoC with a 900MHz Application ARM Cortex-A7 32 bit RISC v7-A processor core stacked under 1GB of 450MHz SDRAM, 10/100 Mbit/s Ethernet, GPIO, UART, I²C bus, SPI bus, 8 GB of Secure Digital storage, a power supply, and a USB Wi-Fi adaptor. | \>\$80.00      | An example of a retailer:                                                                                                 |
| Peripherals with cables                                                                                                                                                                                                                                                                                                               |                |                                                                                                                                |
| Sensors                                                                                                                                                                                                                                                                                                                               |                |                                                                                                                                |
| Actuators                                                                                                                                                                                                                                                                                                                             |                |                                                                                                                                |
| Hardware, etc.                                                                                                                                                                                                                                                                                                                        |                |                                                                                                                                |
| **Phase 1 Total**                                                                                                                                                                                                                                                                                                                     | **\>\$200.00** |                                                                                                                                |
| **Phase 2**                                                                                                                                                                                                                                                                                                                           |                |                                                                                                                                |
| Materials to improve functionality, fit, and finish of project.                                                                                                                                                                                                                                                                       |                |                                                                                                                                |
| **Phase 2 Total**                                                                                                                                                                                                                                                                                                                     | **TBD**        |                                                                                                                                |
| **Phase 3**                                                                                                                                                                                                                                                                                                                           |                |                                                                                                                                |
| Off campus colocation                                                                                                                                                                                                                                                                                                                 | \<\$100.00     |                                                                                                               |
| *Shipping*                                                                                                                                                                                                                                                                                                                            | *TBD*          |                                                                                                                                |
| *Tax*                                                                                                                                                                                                                                                                                                                                 | *TBD*          |                                                                                                                                |
| *Duty*                                                                                                                                                                                                                                                                                                                                | *TBD*          |                                                                                                                                |
| **Phase 3 Total**                                                                                                                                                                                                                                                                                                                     | **TBD**        |                                                                                                                                |

Concluding Remarks
------------------
This proposal presents a plan for providing an IoT solution for *Future Humber PrototypeLab Flow*. This is an opportunity to integrate the knowledge and skills developed in our program to create a collaborative IoT capstone project demonstrating my ability to learn how to support projects. I request approval of this project.

Abstract
--------
The purpose of the prototype lab flow project is to automate a system that is outdated and by doing so, make it more efficient and appealing to students.The Prototype lab at the momment is using ancient technology involving paper and pen, with our project students will be able to do the requests and check availability all through their mobile devices, without having to show up in the prototype lab and not be able to use its services. Our hardware is going to run a camera to scan a QR code generated by our mobile application. Each student will have a QR code generated to him/her that is going to be scanned when entering the lab. The system then will store the information on the database allowing the administrator to have more control over who and when they have been in the lab.    

Table of Contents
=================

[Approved Proposal](#approved-proposal)

   [Executive Summary](#executive-summary)

   [Background](#background)

   [Methodology](#methodology)

   [Concluding Remarks](#concluding-remarks)

[Illustration and Diagram](#illustration-and-diagram)

1.  [Introduction](#1-introduction)
    

2.  [Software Requirements Specification](#2-software-requirements-specification)

    + [2.1 Product Introduction](#21-product-introduction)

       - [2.1.1 Purpose](#211-purpose)
       
       - [2.1.2 Scope](#212-scope)

       - [2.1.3 Product Overview](#213-product-overview)
       
     + [2.2 Overall Description](#22-overall-description)

       - [2.2.1 Database](#221-database)

       - [2.2.2 Web Interface](#222-web-interface)

       - [2.2.3 Hardware](#223-hardware)

       - [2.2.4 Application](#224-application)

3.  [Build Instructions](#3-build-instructions)
      
    + [3.1 Hardware Production](#31-hardware-production)

      - [3.1.1 System Diagram](#311-system-diagram)

      - [3.1.2 Build Budget](#312-build-budget)

      - [3.1.3 Time Commitment](#313-time-commitment)

      - [3.1.4 PCB Soldering](#314-pcb-soldering)
     
      - [3.1.5 Mechanical Assembly & Power Up](#315-mechanical-assembly--power-up)
      
      - [3.1.6 Unit Testing](#316-unit-testing)
      
      - [3.1.7 Scanning QR Codes](#317-scanning-qr-codes)
    
    + [3.2 Application Development](#32-application-development)
    
    + [3.3 Administrator Website Development](#33-administrator-website-development)

3.  [Conclusion](#3-conclusion)

4.  [Recommendations](#4-recommendations)

5.  [Bibliography](#5-bibliography)

List of Illustration/Diagrams
-----------------------------
+ Image 1: System Diagram
+ Image 2: Technical Schematic of the PCB
+ Image 3: Completed PCB

# 1. Introduction

The objective of our project is to develop a better method for requesting time slots in the Prototype Lab. Currently the Prototype lab does not have a very good method for requesting time slots and booking out equipment, they currently use a clipboard method. Using the skills we learned throughout the last 5 semesters, we’re going to make the experience for the students a more pleasant and efficient one, by being able to book time in the Prototype Lab off a mobile application and also add more functionality which also makes the experience better. The types of additional functionality will include being able to book, cancel and reschedule time slots, being able to also request tools and parts that are only available in the Prototype Lab as rental equipment. Students will use the web application to book time slots in the Prototype Lab. Our application will also work in conjunction with a QR code scanning device. As an addition to making the experience better for the students, we are also working on a webpage for the administrator, allowing them to manage time slots and collect specific data. This Technical report will illustrate the work involved in bringing our vision to life.

# 2. Project Description

## 2.1 Product Introduction

### 2.1.1 Purpose
-----------------
The main goal of our project is to simplify the process of requesting items and booking time slots at the Humber Prototype Lab. Up until now, students have no control on whether there are any items available (or any time slots to fill up) at the lab. And the lab administrators have no way of booking time slots and sometimes have to deal with high traffic of students, without any real control. We feel like the system is outdated and needs to be updated for the fast-paced world of today. Therefore, we are developing the  Lab Flow project, which is an mobile application that aims to speed up this process by allowing students to book time slots through their mobile devices as well as providing more control to the lab administrators, effectively increasing the time efficiency and organization of the lab.

### 2.1.2 Scope
---------------
In this project, we will create a mobile application which allows the students to register their accounts, check availability of items and time slots at the Prototype Lab, and request them. Our database will store each user's information like their name, student number, program of study etc. Furthermore, it will also include all the time slots and all the items requested by students. Lab monitors will have a special account where they will be able to check the booked times and manage them, if necessary. They will also have additional statistics presented to them in charts and graphs showing them what days and times most of the time slots are getting filled up the most and which items are getting requested the most.

### 2.1.3 Product Overview
--------------------------
We will be using a Raspberry Pi 3, a digital camera and a monitor. These three components will make up the majority of our hardware that will be used to scan student QR codes. Our product will consist mostly of a software application and webpage synced to a database.

## 2.2 Software Requirements Specification

### 2.2.1 Database
------------------
Our main goal with the database is to make it store the user’s information, mainly user’s student number so that it can be assigned to the corresponding item or time. It will also have all items available in the prototype lab, such as raspberry pi and ardoino so that students may be able to request them. The main function of the database will be to store the time slots that users will be able to reserve in order to use the prototype lab. Once the time is reserved by a student, its student number will get assigned to that time slot and will not be able to be requested by any other student. In order to cancel the time reservation the student will have to do so 24 hours prior to the time reserved. By accessing the student information stored in the database, we will also be able to limit access to the prototype lab as requested by Kelly. The access limit will be done as requested by the prototype lab, and will be done by group such as computer engineering, electrical, design and we will be able to restrict a day or a certain amount of time to that specific group. We will be using MySQL to create the database since we are already familiar with it from our database course in semester 4 and to host the database after doing some research we decided that hostinger would be the best available option. We will be using their free plan which has a limit of 250 visitors a day and the bandwidth is about 100gb, but we came to the conclusion that it should be enough for now just to implement the system and test it and if needed in the future the plan can be changed to a paid one that will offer a higher visitor limit and more bandwidth. Kenneth will be in charge of the database.

### 2.2.2 Web Interface
-----------------------
Our web application is going to allow the student to register and/or log in to his account. The application will allow students to book a time through the web page and also check history of items or booked time slots in the past. The admin will have access to the student’s information and to the info graphs just as in the app. Development of the website will rely heavily on how well we are doing with the application. The more progress we can achieve on it the more time we will have to develop the website and add more functionalities to it. Gurpreet will be in charge of the web page. Meanwhile, Sukhdeep will be working the hardware.

### 2.2.3 Hardware
------------------
Our hardware will be a scanning device used to check-in to the prototype lab. The database will be linked to our scanning device which will allow the student to check-in by just scanning their student id. If the student arrives too early the system will not allow the student to check-in until the time slot is available. If the student does not register for a time slot through the application the device will not allow the student to check-in and will request the student to register into the next available time slot. We will be using a high definition camera to scan the QRs faster and more precisely. Sukhdeep also developed a case for the hardware where the camera will be fixed and there will also be a fixed part to indicate where the student have to display the card and therefore not allowing the student to display it too far from the camera and always displaying at the same distance, making the scan much easier and more reliable.

### 2.2.4 Application
---------------------
Our application will allow the user to register and by doing so adding himself to our database. Once registered, the student will be able to access the other classes and request time slots and items from the prototype lab. He will also be able to see all the time slots available and the ones already taken, he will also be able to see if certain time period or day is reserved to certain group. Once an item or time is requested by student, it will be displayed on his account info. There will be two types of account in our application. The first will be the student account and the second will be an admin account. The admin will have access to all the classes in the app without any restriction and will be able to see what students have requested, when and the student’s information. One of the classes will be the statistics, where the admin will be able to see graphs with all the relevant information such as what are the times that are booked the most, by what group of students and the items that are requested the most. The admin will also be able to cancel a time reservation or item request from a student if necessary and update the student’s info page with the reasons why time or item reservation had to be cancelled or denied. Most of the classes will have access to the database, since it needs its information to display it back to the user and it will support English and French. Matheus and Kenneth will be in charge of the application.

The UI is going to display a log in page as soon as it is opened. User will be able to then create his own account. Upon login, user will have a menu with the following options: My account where user will be able to find account info, such as requested items, schedule appointments in the lab, account information such as user name and etc. Request item, where he will be able to see and search for all the items and check if they are available, if so, he will be able to request them. Scan QR Codes, where the user will be able to scan a QR code present on the item and it is going to display extra information. About us, where the user will have a little bit of information about the development team of this application. Our main activity and focus of the application, Schedule, where the user will be able to select a date and time to book a time slot in the prototype lab and Log out, where user will Log out of his account.

## 3. Build Instructions

## 3.1 Hardware Production

### 3.1.1 System Diagram
-------------------------
The webcam will be used to scan ID barcodes and item QR codes to register the parts with students. The codes will then be processed by the raspberry pi. Once everything is processed the Pi will upload the info to the database which can then be accessed through a mobile app for a better visual experience.
			
![systemdiagram](https://gurpreetjhita.github.io/Build-Log/SystemDiagram.png)

*Image 1: System Diagram shows how the different components work*

### 3.1.2 Build Budget
-------------------------
Before we start building something, we need to plan a budget. A budget will be especially helpful in managing the financial costs related to our build. 

##### Here's a breakdown of the item needed to build this project.
1. A Raspberry Pi
2. USB Webcam
3. A MicroUSB AC adapter
4. A Case for Raspberry Pi 
5. HDMI Cable
6. A MicroSD Card (8GB or higher)
7. ~~Keyboard/Mouse Combo (USB or bluetooth)~~
8. ~~A monitor~~

##### The list of PCB components needed to build the PCB
- 2x20 Header Female (Qty: 1) $3.73
- 100nF Capacitor (Qty: 4) $5.80
- 10uF Capacitor (Qty: 1) $1.45
- 1kΩ Resistor (Qty: 1) $0.15
- 3.9kΩ Resistor (Qty: 4) $2.40
- 4.7kΩ Resistor (Qty: 3) $1.35
- 3mm LED (Qty: 1)  $0.61 
- N-Channel Logic Level MOSFET (Qty: 1) $0.99
- ~~Real Time clock Battery (Qty: 1) $0.48~~
- ~~I2C Real Time Clock (Qty: 1) $11.95~~
- ~~8-bit I2C ADC&DAC with sensors (Qty: 1) $8.50~~
- ~~1x4 Header Female (Qty: 2)  $1.70~~
- ~~1x5 Header Female (Qty: 2) $3.40~~

Let's start with the core of the project, a Raspberry Pi. The Raspberry Pi alone costs around $60-70 online if you're lucky enough find one. We highly recommend opting in for the Raspberry Pi starter kit instead as it comes with all the necessary items like a microSD card, an AC adapter and a case (as well as other stuff like a microSD reader). It's available for about $20-30 extra.

A case is highly recommended as the raspberry pi is relatively fragile microcomputer. A microSD card is required to run the Raspbian OS on the pi. And of course, the AC adapter can be substituted with any microUSB phone/tablet charger.

Moving on, a webcam will be required to scan QR codes. Any USB webcam will do fine. So no need a spend the extra bucks for a high definition webcam. An average webcam will cost between $20 and $35. Or even cheaper if you find a used/refurbished one.

Finally, there is cost associated with the fabricating of a PCB (Printed Circuit board) as well it's components. The Prototype Lab at Humber College charges about $40 to print a PCB. The components we have on my PCB cost about $42.52. However, we do a have a bunch of extra components like sensors and headers that you don't need. Therefore, we have them crossed out on the list. Moreover, this brings the cost down from $42.52 to $16.49. The actual cost might still be higher since not all components are sold in the quantity of single units. As Humber students, all of this is covered as part of our tuition fees. 

Altogether we spent about $100 on the Raspberry Pi starter kit from Amazon. If you buy an older Raspberry Pi, you have to spend extra on a USB wifi receiver or use the ethernet instead. We used my older webcam which we bought for about $35-$40 at the time. And we didn't have to pay extra for the PCB since we're Humber students as well as the PCB components. We're not including a monitor, and a keyboard and a mouse since almost everybody owns at least one of each. If not then you can buy any monitor with an HDMI and any USB or Bluetooth keyboard/mouse combo.

Here's a table that shows all the items we bought and how much we paid for them. Note all prices are in CAD. We're also including the PCB fabricating cost to create a reference for you to compare total costs.

| Item                               | Cost   |
|------------------------------------|--------|
| Raspberry Pi 3 Starter Kit         | $99.99 |
| USB Webcam		             | $34.99 |
| PCB Fabrication Cost               | $40    |
| Required components for PCB        | $42.52 |
| Raspberry Pi Case Construction     | $33.89 |
|**Total**                           | **$284.08**|

Our final build cost totaled to about approximately $300 (That's including taxes and other expenses like shipping and handling).
				
### 3.1.3 Time Commitment
-------------------------
Time is a resource arguably as valuable as money. And this project demands plenty of it. 

We had almost 15 weeks to work this project however with these detailed instructions we will be cutting that time significantly for anyone wanting to recreate this project. Majority of our time was spent in implementing the QR scanning functionality and blinking the L.E.D. for feedback. It was our first time soldering and we were able to solder the PCB in less than an hour. 

If you already have acquired all the parts and got the PCB printed, we believe this project can be completed in a day. That's if you copy paste the all the code and it runs flawlessly without any errors.
		
##### Work Schedule:

| **Tasks**                 | **Time Required**         |
|---------------------------|---------------------------|
| Preparing Online Template | 1 Weeks                   |
| Parts Ordered/Delivery    | 2 Weeks                   |
| Raspberry Pi Setup        | 1 day                     |
| PCB Soldering             | 2 hours                   |
| Testing PCB               | 30 mins                   |
| Research and Coding       | 5 hours in span of 4 days |
| Mechanical Assembly       | 15 minutes                |
| Designing acrylic box     | 2 hours                   |
| Laser Cutting             | 15-30 minutes             |

*Table2: Displays time required to for each task*

### 3.1.4 PCB Soldering
-----------------------
Time to start building the PCB! However, you build something, you must design it first. That's where these files come in handy. Go ahead and download these files.

| Board File | Schematic File |
|---|---|
| [HSHV4-student version.brd](https://raw.githubusercontent.com/ssehra/ssehra.github.io/master/Build%20Log%20Files/HSHV4-student%20version.brd) | [HSHV4-student version.sch](https://raw.githubusercontent.com/ssehra/ssehra.github.io/master/Build%20Log%20Files/HSHV4-student%20version.sch) |

Now that you have these files, you'll need eagle to open them. Eagle can be downloaded  **-->** [here](https://cadsoft.io/). After installing Eagle, edit the name in the files to your own. After you finish editing, go ahead and follow the instructions **-->** [here](https://learn.sparkfun.com/tutorials/using-eagle-board-layout/generating-gerbers) to generate the following files.

| Top Copper (.GTL) | Bottom Copper (.GBL) | Top Soldermask (.GTS) | Bottom Soldermask (.GBS) | Top Silkscreen (.GTO) | Bottom Silkscreen (.GBO) | Drill File (.TXT) |
|---|---|---|---|---|---|---|
| [HSHV4-student version.GTL](https://raw.githubusercontent.com/ssehra/ssehra.github.io/master/Build%20Log%20Files/HSHV4-student%20version.GTL) | [HSHV4-student version.GBL](https://raw.githubusercontent.com/ssehra/ssehra.github.io/master/Build%20Log%20Files/HSHV4-student%20version.GBL) | [HSHV4-student version.GTS](https://raw.githubusercontent.com/ssehra/ssehra.github.io/master/Build%20Log%20Files/HSHV4-student%20version.GTS) | [HSHV4-student version.GBS](https://raw.githubusercontent.com/ssehra/ssehra.github.io/master/Build%20Log%20Files/HSHV4-student%20version.GBS) | [HSHV4-student version.GTO](https://raw.githubusercontent.com/ssehra/ssehra.github.io/master/Build%20Log%20Files/HSHV4-student%20version.GTO) | [HSHV4-student version.GBO](https://raw.githubusercontent.com/ssehra/ssehra.github.io/master/Build%20Log%20Files/HSHV4-student%20version.GBO) | [HSHV4-student version.TXT](https://raw.githubusercontent.com/ssehra/ssehra.github.io/master/Build%20Log%20Files/HSHV4-student%20version.TXT) |

#### Schematic for the PCB
![Alt text](https://raw.githubusercontent.com/ssehra/ssehra.github.io/master/Build%20Log%20Files/Schematic.PNG)
*Image 2: Technical Schematic of the PCB*

These files are used to instruct the machine with the coordinates and to engrave the PCB. It takes about 4-5 hours for the machine to print it. After it's done, wash with water *(preferably deionized water)* and wipe it a piece of cloth to avoid leaving water marks (I recommend using a micro-fiber cloth) and wait for it to dry completely. After that's done you can sand the PCB a bit just to make it shinier. If you do sand it you have the repeat the washing process again.

Now the PCB is ready to be soldered. However, safety comes first. Make sure to wear safety glasses and dress appropriately for a lab/workplace environment. Now Use the schematic as the guide and solder each of the components to their respective places and making sure that the excess solder is not causing a short. Now inspect each soldering carefully again use a voltmeter to test for continuity. If all goes well you are ready to move on to the next chapter.
		
![PCB](https://raw.githubusercontent.com/ssehra/ssehra.github.io/master/Build%20Log%20Files/PCB.png)

*Image 3: Completed PCB*
		
### 3.1.5 Mechanical Assembly & Power Up
----------------------------------------
By now, you have acquired all the parts you are ready to start doing mechanical assembly. It's extremely easy from here onwards since this guide a shortchut to the finishline. 

You should now have the following: a Raspberry Pi, a USB Webcam, a MicroUSB power source and A MicroSD Card (8GB or higher). The starter kit's MicroSD card comes with pre-loaded Raspbian.iso so all you have to do is install it. If it does not then it can be downloaded from the Raspberry Pi website and copied on the MicroSD via a card reader (also included in the starter kit). Insert the flash card into Raspberry Pi.

Begin by connecting power, HDMI and a keyboard and mouse and the USB Webcam to the Raspberry Pi. Also connect your PCB to  the Raspberry Pi. After it boots to the desktop, use **sudo apt-get update** on the command line terminal to update the Raspbian to the latest version. Then use **sudo apt-get dist-upgrade** to upgrade all the installed packages. These commands require internet (ethernet or wifi) to download the updates.

That's it for the assembly.

### 3.1.6 Unit Testing
----------------------
#### Webcam functionality testing
For testing, start by installing the fswebcam library by typing **sudo apt-get install fswebcam**. Then type fswebcam followed by a filename with .jpg extension. For example, **fswebcam image.jpg**. This will snap a picture and save it the current directory with the filename image.jpg. If this works, that means the USB Webcam functions properly.

#### PCB functionality testing
To test the PCB, run the traffic2B.c (source code available **-->** [here](https://raw.githubusercontent.com/ssehra/ssehra.github.io/master/Build%20Log%20Files/traffic2B.c)) with the following steps.

1. Type **sudo apt-get install wiringPi** on the terminal to the Pi Wiring Library
2. Compile the file using **gcc -Wall -o traffic2B traffic2B.c -lwiringPi** (this creates an execuatalbe object called traffic2B)
3. Run the file using **sudo ./traffic2B**

This should start blinking the L.E.D's in a traffic light pattern for an endless loop. Use **Ctrl+C** to exit the program. If this works, this means the PCB is ready to be used.

### 3.1.7 Scanning QR Codes
---------------------------
You can generate your own QR Codes ---> [here](http://www.qr-code-generator.com/), or any other website of your choosing. If you are using a service that allows you to set the pixel count of the QR code, we recommend setting it to the minimum as it's faster and can be handled by webcams with lower resolution. 

#### Now we install the zbar library to scan QR codes. Follow these steps below:
1. Type **sudo apt-get install zbar-tools** on the terminal
2. Use **ls /dev/video*/** to find your video source
3. Test by scanning a QR code by typing **zbarcam /dev/video#** on the terminal. (Note: the pound sign "#" is not literal value, it's supposed to represent the number that step 2 returns returns).

Your webcam should now be working so go ahead and scan a QR code. You should now see the value of QR Code on the terminal saying preceded by the string "QR Code:". You can scan as many QR codes as you'd like. Use **Ctrl+C** to exit the program.

The QR Code scanner has been implemented. 

Nope. You're still not done yet. You need to add the capability to blink the L.E.D as well as save the results into a file for external use (ex: storing information into a database). Keep reading to find out how you add these.

#### Run the following code to Scan QR Codes to implement the QR code scanner
| Shell Script | Python Blink | greenLight.c |
|---|---|---|
|[scanqr.sh](https://raw.githubusercontent.com/ssehra/ssehra.github.io/master/Build%20Log%20Files/scanqr.sh)|[alertLight.py](https://raw.githubusercontent.com/ssehra/ssehra.github.io/master/Build%20Log%20Files/alertLight.py)|[greenLight.c](https://raw.githubusercontent.com/ssehra/ssehra.github.io/master/Build%20Log%20Files/greenLight.c)

The python code is pretty simple it turns the the L.E.D on for 1/8th of a second and then turns it off for the same duration. This cycle is repeated 11 times to show the L.E.D feedback. 

To change the 1/8th second on/off duration simply change the **time.sleep(0.125)** value to any number you like in the blink function. Lower values results in short durations and conversely higher values result in longer durations.
```python
def blink(pin):  
        GPIO.output(pin,GPIO.HIGH)  
        time.sleep(0.125)  
        GPIO.output(pin,GPIO.LOW)  
        time.sleep(0.125)  
        return
```

Moreover, you can also change the number of cycles for how many times this led on/off will be repeated. Simply change the loop count by changing 11 to any value you desire.
```python
for i in range(0,11):
```

When it's all done you test run this program by typing **python alert.py** on the terminal. The L.E.D. should display according to your modifications. 

The C file *greenLight.c* is just there to initiate the green light for use during the scanning process. It just blinks the led in green for 1/10th of the second. I recommend leaving it as is.

The Shell Script file *scanqr.sh* is where the bulk of the program lies. It starts off by compiling and executing *greenLight.c*. Then it defines a few variables for storing information. Every session of script execution produces a file called "scan" followed by a timestamp and the .txt extension. You can change the output filename by editing the variable $ScanResult.
```bash
# Name of scan results file
ScanResult="$cwd/scan_$DATE.txt"
```

The function *scan()* initiates zbarcam to scan QR codes and then kills the task after saving the output. It even asks the user to scan multiple entries. Since it's using zbarcam you apply modifications by using flags like *--prescale* to set the resolution of the scanning resolution. 
```bash
function scan() {
  zbarcam --raw --prescale=320x240 /dev/video0 > $tmp &
  ...
  # Kill tasks, free up space and call test.py to blink L.E.D.
  # Append scan results to file
  # Show scan results
  # Prompt to continue scanning
}
```
More information about the flags and their usages can be found --> [here](http://manpages.ubuntu.com/manpages/xenial/man1/zbarcam.1.html).

#### To run the final code follow these steps:
1. Make sure all three core files: *greenLight.c*, *alertLight.py* and *scanqr.sh* are in the same directory.
2. On the terminal, use **chmod 777** followed by the filenames and grant all Read-Write-Execute permissions to the core files.
3. Type **./scanqr.sh** to execute the shell script.

You should now have the program working. The program scans QR code and then blinks the L.E.D. as well showing the scanned item on the screen. After scanning an item it prompts to scan another. If you choose yes, it scans another item and prompts to scan more items. If you choose no, then the program exits and shows the list of items scanned during the session. According to our code, every session generates a new file with a timestamp. You can use one file and reuse if you want. Furthermore, you can press **Ctrl+C** anytime to exit the program.

Congratulations! You've just implemented the full QR Code scanner program. We hope you were able to reproduce this project following these instructions.

### 3.2 Application Development
-------------------------------

### 3.3 Administrator Website Development
-----------------------------------------

# 4. Conclusion

The prototype lab flow project is going to automate the school’s prototype lab system, making it easier and more appealing to students and staff. With the application allowing students to book time slots and items available in the prototype lab, there will be a higher usage of the lab and therefore more opportunities to students to develop their ideas. The hardware assists on the automation by scanning the students QR code generated by the application and storing it to our database, where the student info will be displayed with the time that the student check in or out. By doing so, we hope to bring a system more in line with the program we are studying and also a system that is much more appealing to students and staff to utilize the prototype lab more often and therefore stimulate all the students ideas by imposing less barriers to them. 

# 5. Recommendations

Having a higher resolution is not necessary,but it makes the scanning process the faster. We recommend purchasing [this](http://www.bestbuy.ca/en-ca/product/microsoft-microsoft-lifecam-6ch-00001-webcam-30-fps-usb-2-0-6ch-00001/10427304.aspx) webcam. 

# 6. Bibliography
